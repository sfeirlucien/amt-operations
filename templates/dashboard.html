{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Fleet Operations Dashboard</h2>
    <form class="d-flex w-25"><input type="text" name="search" class="form-control rounded-pill border-0 shadow-sm" placeholder="Search Vessel..."></form>
</div>

<div class="row">
    {% for v in vessels %}
    <div class="col-12 mb-4">
        <div class="card-pro p-4">
            <div class="d-flex justify-content-between border-bottom pb-3 mb-3">
                <div><h4 class="fw-bold mb-0">{{ v.name }}</h4><span class="text-muted small">IMO: {{ v.imo }} | Class: {{ v.class_society or 'N/A' }}</span></div>
                <span class="badge bg-light text-dark align-self-center p-2">{{ v.flag }}</span>
            </div>
            <div class="row">
                <div class="col-md-9">
                    <table class="table table-borderless align-middle">
                        <thead class="text-muted small"><tr><th>Certificate</th><th>Expiry</th><th>Status</th><th>File</th></tr></thead>
                        <tbody>
                            {% for c in v.certificates %}
                            <tr>
                                <td class="fw-bold">{{ c.name }}</td>
                                <td>{{ c.expiry_date }}</td>
                                <td><span class="badge bg-{{ c.get_status().bg }}-subtle text-{{ c.get_status().bg }} rounded-pill p-2">{{ c.get_status().label }}</span></td>
                                <td>{% if c.file_path %}<a href="/uploads/{{ c.file_path }}" target="_blank" class="text-danger"><i class="fas fa-file-pdf fs-5"></i></a>{% else %}<span class="text-muted small">No PDF</span>{% endif %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
